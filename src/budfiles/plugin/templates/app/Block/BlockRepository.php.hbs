<?php

namespace {{pascalcase namespace}}\Block;

use Illuminate\Support\Collection;
use Psr\Container\ContainerInterface;
use {{pascalcase namespace}}\Block\Contract\BlockInterface;
use {{pascalcase namespace}}\Block\Contract\BlockRepositoryInterface;

/**
 * Block repository implementation class.
 */
class BlockRepository implements BlockRepositoryInterface
{
    /** @var Collection */
    private $blocks;

    /**
     * Construct.
     *
     * @param ContainerInterface
     */
    public function __construct(ContainerInterface $bud)
    {
        $this->blocks = $bud->get('collection')::make([]);
    }

    /**
     * Get block.
     *
     * @param  string
     * @return BlockInterface
     */
    public function get(string $handle): BlockInterface
    {
        return $this->blocks->get($handle);
    }

    /**
     * Get blocks.
     *
     * @return Collection
     */
    public function all(): Collection
    {
        return $this->blocks;
    }

    /**
     * Add block.
     *
     * @param  BlockInterface
     * @return void
     */
    public function add(BlockInterface $block): void
    {
        $this->blocks->put($block->getName(), $block);
    }

    /**
     * Remove block.
     *
     * @param  string
     * @return void
     */
    public function remove(string $handle): void
    {
        $this->blocks->forget($handle);
    }
}
