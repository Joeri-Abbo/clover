{"version":3,"sources":["../src/bud/store.js","../src/bud/components/Banner.js","index.js"],"names":["cwd","process","budConfig","require","store","writeDir","projectConfig","label","prompts","data","status","error","complete","ready","search","core","results","plugins","project","Provider","StateProvider","children","state","dispatch","action","type","key","value","colors","success","Banner","width","spinner","setSpinner","setStatus","statusColor","setStatusColor","propTypes","PropTypes","string","Bud"],"mappings":"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","file":"index.js","sourceRoot":"../../commands","sourcesContent":["import React, {createContext, useReducer} from 'react'\n\nconst cwd = process.cwd()\n\n/** app config */\nlet budConfig\ntry {\n  budConfig = require(`${process.cwd()}/.bud/bud.config.json`)\n} catch {\n  budConfig = {}\n}\n\n/**\n * Bud application context\n */\nexport const store = createContext({\n  cwd,\n  writeDir: cwd,\n  projectConfig: {\n    ...budConfig,\n  },\n  label: 'Bud: a modern WordPress scaffolding utility',\n  prompts: null,\n  data: null,\n  status: null,\n  error: null,\n  complete: false,\n  ready: false,\n  search: {\n    core: {\n      results: null,\n      status: null,\n      complete: false,\n    },\n    plugins: {\n      results: null,\n      status: null,\n      complete: false,\n    },\n    project: {\n      results: null,\n      status: null,\n      complete: false,\n    },\n  },\n})\n\nconst {Provider} = store\n\n/**\n * State provider\n */\nexport const StateProvider = ({children}) => {\n  const [state, dispatch] = useReducer((state, action) => {\n    switch (action.type) {\n      case 'SET': {\n        const {key, value} = action\n        return {\n          ...state,\n          [key]: value,\n        }\n      }\n    }\n    switch (action.type) {\n      case 'SET_LABEL': {\n        const {label} = action\n        return {\n          ...state,\n          label,\n        }\n      }\n      case 'SET_PROMPTS': {\n        const {prompts} = action\n        return {\n          ...state,\n          prompts,\n        }\n      }\n      case 'SET_DATA': {\n        const {data} = action\n        return {\n          ...state,\n          data: {\n            ...state.data,\n            ...data,\n          },\n        }\n      }\n      case 'SET_READY': {\n        const {ready} = action\n        return {\n          ...state,\n          ready,\n        }\n      }\n      case 'SET_STATUS': {\n        const {status} = action\n        return {\n          ...state,\n          status,\n        }\n      }\n      case 'SET_ERROR': {\n        const {error} = action\n        return {\n          ...state,\n          error,\n        }\n      }\n      case 'SET_COMPLETE': {\n        const {complete} = action\n        return {\n          ...state,\n          complete,\n        }\n      }\n      case 'SEARCH_RESULTS': {\n        const {results, status, complete} = action\n        return {\n          ...state,\n          search: {\n            ...state.search,\n            [`${action.label}`]: {\n              results,\n              status,\n              complete,\n            },\n          },\n        }\n      }\n    }\n  }, store)\n\n  return <Provider value={{state, dispatch}}>{children}</Provider>\n}\n","import React, {useContext, useEffect, useState} from 'react'\nimport PropTypes from 'prop-types'\nimport {Box, Text, Color} from 'ink'\nimport Link from 'ink-link'\nimport Spinner from 'ink-spinner'\nimport {store} from './../store'\nimport useStdoutDimensions from 'ink-use-stdout-dimensions'\n\nconst colors = {\n  success: '#96EF85',\n  error: '#BE425E',\n}\n\n/**\n * Banner\n *\n * @prop {string} label\n */\nconst Banner = ({label}) => {\n  const {state} = useContext(store)\n  const [width] = useStdoutDimensions()\n  const [spinner, setSpinner] = useState(true)\n  const [status, setStatus] = useState(false)\n  const [statusColor, setStatusColor] = useState('#ffffff')\n  useEffect(() => {\n    if(state?.status && state.status == 'complete') {\n      setStatus('ðŸŽ‰')\n      setStatusColor(colors.success)\n      setSpinner(false)\n    }\n    if(state?.status && state.status == 'error') {\n      setStatus('ðŸ’¢')\n      setStatusColor(colors.error)\n      setSpinner(false)\n    }\n  }, [state])\n\n  return state ? (\n    <Box flexDirection=\"row\" justifyContent=\"space-between\" marginTop={1} width={width - (width/20)}>\n      <Box flexDirection=\"row\" justifyContent=\"space-between\">\n        <Box width={1} marginRight={2}>\n          {spinner ? <Spinner /> : <Text>{status}</Text>}\n        </Box>\n\n        <Box>\n          <Text>\n            <Color hex={statusColor}>\n              {label}\n            </Color>\n          </Text>\n        </Box>\n      </Box>\n\n      <Box flexDirection=\"row\">\n        <Text>{`ðŸŒ±`}</Text>\n        <Box>\n          <Text bold>\n            <Link url=\"https://roots.io/bud\">\n              <Color green>{'Bud'}</Color>\n            </Link>\n          </Text>\n        </Box>\n      </Box>\n    </Box>\n  ) : (\n    <Box><Spinner /> Loading</Box>\n  )\n}\n\nBanner.propTypes = {\n  label: PropTypes.string,\n}\n\nexport default Banner\n","import React from 'react'\nimport {Box, Color, Text} from 'ink'\nimport Banner from './../src/bud/components/Banner'\n\n/** Command: bud */\n/// Bud information\nconst Bud = () => (\n  <Box flexDirection=\"column\" marginTop={1}>\n    <Banner label=\"Bud: Modern WordPress Scaffolding\" />\n\n    <Box flexDirection=\"column\">\n      <Box marginBottom={1}>\n        <Text>\n          To get started run\n          <Color green> npx @roots/bud init {`[project-dir]`}</Color>\n        </Text>\n      </Box>\n\n      <Box marginBottom={1}>\n        <Text>The init command will install Bud as a project dependency.</Text>\n      </Box>\n      <Box marginBottom={1}>\n        <Text>\n          Afterward, you can run subsequent commands with\n          <Color green> yarn generate [generator-name]</Color>.\n        </Text>\n      </Box>\n    </Box>\n  </Box>\n)\n\nexport default Bud\n"]}