{"version":3,"sources":["list/index.js"],"names":["cwd","process","rootsBudsGlob","moduleBudsGlob","projectBudsGlob","List","projectBuds","setProjectBuds","length","buds","map","bud","src","require","command","name","source","description","filter","moduleBuds","setModuleBuds","rootsBuds","setRootsBuds","id"],"mappings":"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","file":"index.js","sourceRoot":"../../commands","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport {Box} from 'ink'\nimport globby from 'globby'\nimport Divider from 'ink-divider'\n\n/**\n * Budfile glob paths\n */\nconst cwd = process.cwd()\nconst rootsBudsGlob = `${cwd}/node_modules/@roots/bud/src/budfiles/**/*.bud.js`\nconst moduleBudsGlob = `${cwd}/node_modules/**/bud-plugin-*/*.bud.js`\nconst projectBudsGlob = `${cwd}/.bud/**/*.bud.js`\n\n/** Command: bud list */\n/// List available budfiles\nconst List = () => {\n  /**\n   * Project buds\n   */\n  const [projectBuds, setProjectBuds] = useState([])\n  useEffect(() => {\n    projectBuds.length == 0 &&\n      (async () => {\n        const buds = await globby(projectBudsGlob)\n\n        buds &&\n          setProjectBuds(\n            buds\n              .map(bud => {\n                const src = require(bud)\n                return {\n                  command: `yarn generate ${src.name}`,\n                  source: 'project',\n                  name: src.name,\n                  description: src.description,\n                }\n              })\n              .filter(bud => bud.name),\n          )\n      })()\n  }, [])\n\n  /**\n   * Module buds\n   */\n  const [moduleBuds, setModuleBuds] = useState([])\n  useEffect(() => {\n    ;(async () => {\n      const buds = await globby(moduleBudsGlob)\n\n      buds &&\n        setModuleBuds(\n          buds\n            .map(bud => {\n              const src = require(bud)\n\n              return {\n                command: `yarn generate ${src.name}`,\n                source: src.source ? src.source : null,\n                name: src.name,\n                description: src.description,\n              }\n            })\n            .filter(bud => bud.name),\n        )\n    })()\n  }, [])\n\n  /**\n   * Module buds\n   */\n  const [rootsBuds, setRootsBuds] = useState([])\n  useEffect(() => {\n    rootsBuds.length == 0 &&\n      (async () => {\n        const buds = await globby(rootsBudsGlob)\n\n        buds &&\n          setRootsBuds(\n            buds\n              .map(bud => {\n                const src = require(bud)\n                return src.name !== 'bud' && src.name !== 'init'\n                  ? {\n                      command: `yarn generate ${src.name}`,\n                      source: '@roots/bud',\n                      name: src.name,\n                      description: src.description,\n                    }\n                  : {}\n              })\n              .filter(bud => bud.name),\n          )\n      })()\n  }, [])\n\n  const buds = [...projectBuds, ...rootsBuds, ...moduleBuds]\n\n  /**\n   * Render\n   */\n  return (\n    <Box flexDirection=\"column\" marginTop={1} marginBottom={1}>\n      <Box flexDirection=\"row\" flexGrow={1} justifyContent=\"flex-start\">\n        <Box width={40}>Command</Box>\n        <Box width={40} marginLeft={1}>\n          Source\n        </Box>\n        <Box width={20} marginLeft={1}>\n          Name\n        </Box>\n      </Box>\n\n      <Divider padding={0} width={100} />\n\n      {buds.map((bud, id) => (\n        <Box\n          key={id}\n          flexDirection=\"row\"\n          flexGrow={1}\n          justifyContent=\"flex-start\">\n          <Box width={40}>{bud.command}</Box>\n          <Box width={40} marginLeft={1}>\n            {bud.source}\n          </Box>\n          <Box width={20} marginLeft={1}>\n            {bud.name}\n          </Box>\n        </Box>\n      ))}\n    </Box>\n  )\n}\n\nexport default List\n"]}