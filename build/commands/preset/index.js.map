{"version":3,"sources":["../src/components/input/select-input/Indicator.js","../src/components/input/select-input/Item.js","../src/components/input/select-input/SelectInput.js","../src/components/input/select-input/index.js","../src/hooks/usePresetIndex.js","../src/components/Banner.js","../src/components/Loading.js","../src/components/App.js","../src/hooks/useConfig.js","../src/hooks/useData.js","../src/hooks/usePreset.js","../src/bud/compiler/helpers/index.js","../src/bud/compiler/index.js","../src/bud/config/index.js","../src/bud/data/index.js","../src/bud/util/command.js","../src/bud/util/index.js","../src/bud/pipes/actions.js","../src/bud/pipes/index.js","../src/bud/actions/addDependencies.js","../src/bud/actions/command.js","../src/bud/actions/compile.js","../src/bud/actions/copy.js","../src/bud/actions/ensureDir.js","../src/bud/actions/ensureDirs.js","../src/bud/actions/git/clone.js","../src/bud/actions/git/index.js","../src/bud/actions/install.js","../src/bud/actions/json.js","../src/bud/actions/touch.js","../src/bud/actions/index.js","../src/bud/prettier/inferParser.js","../prettier.config.js","../src/bud/prettier/format.js","../src/bud/prettier/index.js","../src/bud/index.js","../src/hooks/useSubscription.js","../src/components/Tasks.js","../src/middleware/PresetMiddleware.js","preset/index.js"],"names":["Indicator","isSelected","figures","pointer","propTypes","PropTypes","bool","defaultProps","Item","label","string","isRequired","ARROW_UP","ARROW_DOWN","ENTER","SelectInput","PureComponent","rotateIndex","selectedIndex","props","initialIndex","data","items","focus","onSelect","onHighlight","state","hasLimit","limit","getLimit","s","String","lastIndex","length","atFirstIndex","nextIndex","nextRotateIndex","nextSelectedIndex","setState","slicedItems","slice","atLastIndex","Math","min","render","indicatorComponent","itemComponent","map","item","index","key","value","React","createElement","componentDidMount","stdin","setRawMode","on","handleInput","componentWillUnmount","removeListener","componentDidUpdate","prevProps","array","number","func","object","SelectInputWithStdin","cwd","process","fromMatches","matches","generator","name","path","basename","replace","useModulePresets","keyword","presets","setPresets","checked","setChecked","packages","dir","resolve","join","scanAllDirs","pkg","usePresetIndex","core","checkedCore","plugin","checkedPlugin","status","complete","Banner","Loading","message","spinnerColor","App","isLoading","loadingMessage","children","useConfig","configFile","config","require","useData","setData","promptsInitialized","setPromptsInitialized","prompts","then","generatorObj","file","getTemplateDir","generatorFile","usePreset","presetFile","preset","setGenerator","tasks","steps","setSteps","step","generators","results","current","templateDir","task","setComplete","helpers","helper","fn","Array","prototype","call","arguments","component","options","indexOf","inverse","components","hasInstance","forEach","makeCompiler","handlebars","registerHelpers","push","registerHelper","compiler","make","compile","makeConfig","projectDir","execa","makeData","project","command","cmd","makeUtil","actions","observer","pipe","Observable","subscribe","next","error","pipes","addDependencies","util","cmdStr","repo","dev","pkgs","exitCode","stderr","msg","run","prettier","src","dest","template","parser","format","copy","ensureDir","fs","ensureDirs","dirs","clone","stdout","git","action","install","json","output","merge","err","console","log","touch","register","handle","callback","parsers","js","jsx","graphql","css","md","html","htm","ts","tsx","yml","yaml","less","inferParser","ext","split","module","exports","arrowParens","bracketSpacing","tabWidth","printWidth","singleQuote","jsxBracketSameLine","useTabs","trailingComma","semi","overrides","files","content","JSON","stringify","bud","registerActions","job","useSubscription","exit","subscription","setSubscription","setStatus","unsubscribe","Tasks","PresetMiddleware","Preset","inputArgs","selection","setSelection","presetCandidates","filter","displayQuickSearch"],"mappings":"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","file":"index.js","sourceRoot":"../../commands","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Box, Text} from 'ink'\nimport figures from 'figures'\n\nconst Indicator = ({isSelected}) => (\n  <Box marginRight={1}>\n    <Text color=\"blue\">{isSelected ? figures.pointer : ''}</Text>\n  </Box>\n)\n\nIndicator.propTypes = {\n  isSelected: PropTypes.bool,\n}\n\nIndicator.defaultProps = {\n  isSelected: false,\n}\n\nexport default Indicator\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Text} from 'ink'\n\nconst Item = ({isSelected, label}) => (\n  <Text blue={isSelected}>{label}</Text>\n)\n\nItem.propTypes = {\n  isSelected: PropTypes.bool,\n  label: PropTypes.string.isRequired,\n}\n\nItem.defaultProps = {\n  isSelected: false,\n}\n\nexport default Item\n","import React, {PureComponent} from 'react'\nimport PropTypes from 'prop-types'\nimport {isEqual} from 'lodash'\nimport arrRotate from 'arr-rotate'\nimport {Box, useStdin} from 'ink'\nimport Indicator from './Indicator'\nimport Item from './Item'\n\nconst ARROW_UP = '\\u001B[A'\nconst ARROW_DOWN = '\\u001B[B'\nconst ENTER = '\\r'\n\nclass SelectInput extends PureComponent {\n  static propTypes = {\n    items: PropTypes.array,\n    focus: PropTypes.bool,\n    initialIndex: PropTypes.number,\n    indicatorComponent: PropTypes.func,\n    itemComponent: PropTypes.func,\n    limit: PropTypes.number,\n    stdin: PropTypes.object.isRequired,\n    setRawMode: PropTypes.func.isRequired,\n    onSelect: PropTypes.func,\n    onHighlight: PropTypes.func,\n  }\n\n  static defaultProps = {\n    items: [],\n    focus: true,\n    initialIndex: 0,\n    indicatorComponent: Indicator,\n    itemComponent: Item,\n    limit: null,\n    onSelect() {},\n    onHighlight() {},\n  }\n\n  state = {\n    rotateIndex: 0,\n    selectedIndex: this.props.initialIndex,\n  }\n\n  render() {\n    const {items, indicatorComponent, itemComponent} = this.props\n    const {rotateIndex, selectedIndex} = this.state\n    const limit = this.getLimit()\n\n    const slicedItems = this.hasLimit()\n      ? arrRotate(items, rotateIndex).slice(0, limit)\n      : items\n\n    return (\n      <Box flexDirection=\"column\">\n        {slicedItems.map((item, index) => {\n          const isSelected = index === selectedIndex\n\n          return (\n            <Box key={item.key || item.value}>\n              {React.createElement(indicatorComponent, {isSelected})}\n              {React.createElement(itemComponent, {\n                ...item,\n                isSelected,\n              })}\n            </Box>\n          )\n        })}\n      </Box>\n    )\n  }\n\n  componentDidMount() {\n    const {stdin, setRawMode} = this.props\n\n    setRawMode(true)\n    stdin.on('data', this.handleInput)\n  }\n\n  componentWillUnmount() {\n    const {stdin, setRawMode} = this.props\n\n    stdin.removeListener('data', this.handleInput)\n    setRawMode(false)\n  }\n\n  componentDidUpdate(prevProps) {\n    if (!isEqual(prevProps.items, this.props.items)) {\n      this.setState({\n        // eslint-disable-line react/no-did-update-set-state\n        rotateIndex: 0,\n        selectedIndex: 0,\n      })\n    }\n  }\n\n  handleInput = data => {\n    const {items, focus, onSelect, onHighlight} = this.props\n    const {rotateIndex, selectedIndex} = this.state\n    const hasLimit = this.hasLimit()\n    const limit = this.getLimit()\n\n    if (focus === false) {\n      return\n    }\n\n    const s = String(data)\n\n    if (s === ARROW_UP || s === 'k') {\n      const lastIndex = (hasLimit ? limit : items.length) - 1\n      const atFirstIndex = selectedIndex === 0\n      const nextIndex = hasLimit ? selectedIndex : lastIndex\n      const nextRotateIndex = atFirstIndex\n        ? rotateIndex + 1\n        : rotateIndex\n      const nextSelectedIndex = atFirstIndex\n        ? nextIndex\n        : selectedIndex - 1\n\n      this.setState({\n        rotateIndex: nextRotateIndex,\n        selectedIndex: nextSelectedIndex,\n      })\n\n      const slicedItems = hasLimit\n        ? arrRotate(items, nextRotateIndex).slice(0, limit)\n        : items\n      onHighlight(slicedItems[nextSelectedIndex])\n    }\n\n    if (s === ARROW_DOWN || s === 'j') {\n      const atLastIndex =\n        selectedIndex === (hasLimit ? limit : items.length) - 1\n      const nextIndex = hasLimit ? selectedIndex : 0\n      const nextRotateIndex = atLastIndex\n        ? rotateIndex - 1\n        : rotateIndex\n      const nextSelectedIndex = atLastIndex\n        ? nextIndex\n        : selectedIndex + 1\n\n      this.setState({\n        rotateIndex: nextRotateIndex,\n        selectedIndex: nextSelectedIndex,\n      })\n\n      const slicedItems = hasLimit\n        ? arrRotate(items, nextRotateIndex).slice(0, limit)\n        : items\n      onHighlight(slicedItems[nextSelectedIndex])\n    }\n\n    if (s === ENTER) {\n      const slicedItems = hasLimit\n        ? arrRotate(items, rotateIndex).slice(0, limit)\n        : items\n      onSelect(slicedItems[selectedIndex])\n    }\n  }\n\n  hasLimit = () => {\n    const {limit, items} = this.props\n\n    return typeof limit === 'number' && items.length > limit\n  }\n\n  getLimit = () => {\n    const {limit, items} = this.props\n\n    if (this.hasLimit()) {\n      return Math.min(limit, items.length)\n    }\n\n    return items.length\n  }\n}\n\nconst SelectInputWithStdin = props => {\n  const {stdin, setRawMode} = useStdin()\n\n  return (\n    <SelectInput {...props} stdin={stdin} setRawMode={setRawMode} />\n  )\n}\n\nexport default SelectInputWithStdin\nexport {Indicator, Item}\n","export {default, Item, Indicator} from './SelectInput'\n","import path from 'path'\nimport {useState, useEffect} from 'react'\nimport findPlugins from 'find-plugins'\nimport globby from 'globby'\n\nconst cwd = process.cwd()\n\n/**\n * Process glob matches into the format the rest of the application anticipates.\n */\nconst fromMatches = matches =>\n  matches.map(generator => ({\n    name: path.basename(generator).replace('.preset.bud.js', ''),\n    path: generator,\n  }))\n\n/**\n * Presets sourced from node_modules\n *\n * @param {string} keyword package.json keywords match\n */\nconst useModulePresets = keyword => {\n  const [presets, setPresets] = useState([])\n  const [checked, setChecked] = useState(false)\n\n  useEffect(() => {\n    ;(async () => {\n      setChecked(false)\n\n      const packages = findPlugins({\n        dir: path.resolve(path.join(cwd, 'node_modules')),\n        scanAllDirs: true,\n        keyword,\n      }).map(pkg =>\n        path.join(\n          path.join(pkg.dir, 'presets'),\n          '/**/*.preset.bud.js',\n        ),\n      )\n\n      const matches = await globby(packages)\n\n      setPresets(fromMatches(matches))\n      setChecked(true)\n    })()\n  }, [keyword])\n\n  return [presets, checked]\n}\n\n/**\n * usePresets hook\n */\nconst usePresetIndex = () => {\n  const [core, checkedCore] = useModulePresets('bud-core-presets')\n  const [plugin, checkedPlugin] = useModulePresets('bud-preset')\n\n  return {\n    plugin,\n    core,\n    status: {\n      plugin: checkedPlugin,\n      core: checkedCore,\n    },\n    complete: checkedCore && checkedPlugin,\n  }\n}\n\nexport default usePresetIndex\nexport {useModulePresets}\n","import React from 'react'\nimport {Box, Text} from 'ink'\n\nconst Banner = () => (\n  <Box flexDirection=\"column\" marginBottom={1}>\n    <Text color=\"green\">⚡️ @roots/bud</Text>\n  </Box>\n)\n\nexport default Banner\n","import React from 'react'\nimport {Text} from 'ink'\nimport PropTypes from 'prop-types'\n\n/**\n * Loading\n *\n * @prop {string} message\n */\nconst Loading = ({message, spinnerColor = 'white'}) => (\n  <Text color={spinnerColor}> {message}</Text>\n)\n\nLoading.propTypes = {\n  message: PropTypes.string,\n}\n\nLoading.defaultProps = {\n  message: 'Loading',\n}\n\nexport default Loading\n","import React from 'react'\nimport {Box} from 'ink'\n\nimport Banner from './Banner'\nimport Loading from './Loading'\n\n/**\n * Bud application.\n *\n * @prop {object} children\n */\nconst App = ({isLoading, loadingMessage, children}) => (\n  <Box\n    flexDirection=\"column\"\n    justifyContent=\"flex-start\"\n    paddingTop={1}\n    paddingRight={1}\n    paddingBottom={0}\n    paddingLeft={1}>\n    <Banner />\n    {isLoading && (\n      <Loading\n        spinnerColor=\"green\"\n        message={loadingMessage ?? 'Loading'}\n      />\n    )}\n    {children}\n  </Box>\n)\n\nexport default App\n","import {join} from 'path'\nimport {existsSync} from 'fs-extra'\n\n/**\n * Use config\n */\nconst useConfig = cwd => {\n  const configFile = join(cwd, '.bud/bud.config.json')\n  const config = existsSync(configFile) ? require(configFile) : null\n\n  return {config}\n}\n\nexport default useConfig\n","import {useEffect, useState} from 'react'\nimport {prompt} from 'enquirer'\n\n/**\n * Use prompts\n */\nconst useData = generator => {\n  const [data, setData] = useState(null)\n  const [promptsInitialized, setPromptsInitialized] = useState(null)\n  useEffect(() => {\n    if (generator && !data && !promptsInitialized) {\n      setPromptsInitialized(true)\n\n      generator.prompts\n        ? prompt(generator.prompts).then(data => setData(data))\n        : setData({})\n    }\n  }, [generator, data, promptsInitialized])\n\n  return {data}\n}\n\nexport default useData\n","import {existsSync} from 'fs'\nimport {join, dirname} from 'path'\nimport {useEffect, useState} from 'react'\nimport resolvePkg from 'resolve-pkg'\nimport globby from 'globby'\n\n/**\n * Helpers: resolve generators.\n */\nconst generatorObj = file => (existsSync(file) ? require(file) : null)\nconst getTemplateDir = generatorFile =>\n  join(dirname(generatorFile), 'templates')\n\n/**\n * Use Preset\n *\n * Returns a single generator with prompts and tasks merged\n * from all the generators specified in the preset.\n *\n * @param  {string} presetFile\n * @return {object}\n */\nconst usePreset = presetFile => {\n  const preset = generatorObj(presetFile)\n\n  /**\n   * This is the singular generator where the hook will\n   * place everything specified in the preset.\n   */\n  const [generator, setGenerator] = useState({\n    prompts: [],\n    tasks: [],\n  })\n\n  /**\n   * This seems kind of hackish but it seems to be consistently working..\n   *\n   * The order of the generators specified in the preset must be preserved.\n   * Steps state is incremented once a generator has been fully processed.\n   *\n   * This allows the application to remain non-blocking while also preserving\n   * the order indicated by the preset.\n   */\n  const [steps, setSteps] = useState(0)\n  useEffect(() => {\n    /**\n     * If no generator is available then bail early. This effect loops\n     * endlessly so it's best to do it straight away.\n     */\n    const step = preset.generators[steps]\n    if (!step) return\n\n    ;(async () => {\n      /** Resolve the pkg dir */\n      const pkg = await resolvePkg(step.pkg)\n\n      /** Resolve the actual generator obj. */\n      const results = await globby([\n        `${pkg}/generators/${step.name}/*.bud.js`,\n      ])\n      const current = generatorObj(results[0])\n      const templateDir = getTemplateDir(results[0])\n\n      /**\n       * Map the current generators template dir path\n       * onto each task in the generator. This simplifies things\n       * when Bud is processing each action.\n       */\n      if (current) {\n        current.tasks = current.tasks.map(task => ({\n          ...task,\n          templateDir,\n        }))\n      }\n\n      /**\n       * Spread assign the current generator values with the\n       * cumulative generator to be returned from the hook.\n       */\n      setGenerator({\n        prompts: [\n          ...(generator?.prompts ?? []),\n          ...(current?.prompts ?? []),\n        ],\n        tasks: [\n          ...(generator?.tasks ?? []),\n          ...(current?.tasks ?? []),\n        ],\n      })\n\n      /**\n       * Lastly, increment the index. This will cause the effect to be\n       * called again on React's next render.\n       */\n      setSteps(1 + steps)\n    })()\n  }, [preset, steps])\n\n  /**\n   * When the steps counter exceeds the length of\n   * the total number of generators in the preset, its's safe\n   * to conclude that we have processed all the generators.\n   */\n  const [complete, setComplete] = useState(false)\n  useEffect(() => {\n    steps && steps >= preset.generators.length && setComplete(true)\n  }, [steps])\n\n  /**\n   * Return aggregated generators once they have finished processing.\n   */\n  return complete ? generator : false\n}\n\nexport default usePreset\n","/**\n * Templating helpers\n */\nconst helpers = data => [\n  {\n    helper: 'array',\n    fn: function () {\n      return Array.prototype.slice.call(arguments, 0, -1)\n    },\n  },\n  {\n    helper: 'has',\n    fn: function (object, component, options) {\n      if (data[object].indexOf(component) > -1) {\n        return options.fn(this)\n      }\n\n      return options.inverse(this)\n    },\n  },\n  {\n    helper: 'hasAny',\n    fn: function (object, components, options) {\n      let hasInstance = false\n\n      if (components) {\n        components.forEach(component => {\n          if (data[object].indexOf(component) > -1) {\n            hasInstance = true\n          }\n        })\n      }\n\n      return hasInstance ? options.fn(this) : options.inverse(this)\n    },\n  },\n  {\n    helper: 'raw',\n    fn: function (options) {\n      return options.fn()\n    },\n  },\n]\n\nexport default helpers\n","import handlebars from 'handlebars'\nimport helpers from './helpers'\nimport handlebarsHelpers from 'handlebars-helpers'\n\n/**\n * Compiler.\n *\n * @param {handlebars} handlebars\n */\nconst makeCompiler = ({generator, data}) => {\n  handlebarsHelpers({handlebars})\n\n  generator.registerHelpers &&\n    generator.registerHelpers.forEach(helper => {\n      helpers.push(helper)\n    })\n\n  helpers(data).forEach(({helper, fn}) => {\n    handlebars.registerHelper(helper, fn)\n  })\n\n  return {\n    compiler: handlebars,\n\n    /**\n     * Make template.\n     *\n     * @param {string} path\n     */\n    make: function (path) {\n      return this.compiler.compile(path)\n    },\n  }\n}\n\nexport default makeCompiler\n","/**\n * Config\n *\n * @param {string} projectDir\n */\nconst makeConfig = ({projectDir, config}) => ({\n  projectDir,\n  ...config,\n  execa: {\n    cwd: projectDir,\n  },\n})\n\nexport default makeConfig\n","/**\n * Make data\n *\n * @type   {func}\n * @prop   {object} data\n * @return {object}\n */\nconst makeData = ({config, data, generator}) => {\n  const setData = ({key, value}) => {\n    data[key] = value\n  }\n\n  return {\n    ...(config ? config.project : []),\n    ...data,\n    ...(generator.data ? generator.data : []),\n    setData,\n  }\n}\n\nexport default makeData\n","import execa from 'execa'\n\n/**\n * Task runner\n *\n * @param  {object} config\n *\n * @return {func}\n */\nconst command = config => {\n  return cmd => execa.command(cmd, config.execa)\n}\n\nexport default command\n","import command from './command'\n\n/**\n * Make util\n *\n * @prop   {object} config\n * @return {object}\n */\nconst makeUtil = ({config}) => ({\n  command: command(config),\n})\n\nexport default makeUtil\n","import {Observable, from} from 'rxjs'\nimport {concatMap} from 'rxjs/operators'\n\n/**\n * Curried actions\n *\n * @prop {Observer} observer\n * @prop {object}   generator\n * @prop {object}   task\n * @prop {object}   actionProps\n */\nconst actions = ({observer, generator, actions, ...props}) => {\n  from(generator.tasks)\n    .pipe(\n      concatMap(\n        task =>\n          new Observable(async observer => {\n            actions[task.task]({task, actions, observer, ...props})\n          }),\n      ),\n    )\n    .subscribe({\n      next: next => observer.next(next),\n      error: error => observer.error(error),\n      complete: () => observer.complete(),\n    })\n}\n\nexport default actions\n","import actions from './actions'\n\n/**\n * Make Pipes\n *\n * @return {object}\n */\nconst pipes = [actions]\n\nexport default pipes\n","/**\n * Action: Add dependencies\n *\n * @param  {object}   task\n * @param  {Observer} observer\n * @param  {object}   util\n *\n * @return {void}\n */\nconst addDependencies = async ({task, observer, util}) => {\n  const cmdStr = () => {\n    switch (task.repo) {\n      case 'npm':\n        return `yarn add ${task.dev ? `-D` : ``} ${task.pkgs.join(\n          ' ',\n        )}`\n      case 'packagist':\n        return `composer require ${task.pkgs.join(' ')} ${\n          task.dev ? `--development` : ``\n        }`\n      default:\n        observer.error(`Incorrect package repo specified.`)\n    }\n  }\n\n  observer.next(`Installating packages from ${task.repo}`)\n  const {command, exitCode, stderr} = await util.command(cmdStr())\n  command && observer.next(command)\n  exitCode == 0 ? observer.complete() : observer.error(stderr)\n}\n\nexport default addDependencies\n","/**\n * Action: Arbitrary command\n *\n * @prop   {object}   task\n * @prop   {Observer} observer\n * @prop   {object}   util\n *\n * @return {Observable}\n */\nconst command = async ({task, observer, util}) => {\n  task.msg && observer.next(`${task.msg}`)\n\n  const {exitCode, stderr} = await util.command(task.run)\n  exitCode == 0 ? observer.complete() : observer.error(stderr)\n}\n\nexport default command\n","import {join} from 'path'\nimport {outputFile, readFile} from 'fs-extra'\n\n/**\n * Action: template\n *\n * @param  {object}   task\n * @param  {Observer} observer\n * @param  {object}   data\n * @param  {object}   config\n * @param  {object}   util\n * @param  {object}   prettier\n * @param  {object}   compiler\n * @return {void}\n */\nconst compile = async ({\n  task,\n  observer,\n  data,\n  prettier,\n  compiler,\n  config,\n}) => {\n  observer.next(`Write file: ${task.src}`)\n\n  const src = await readFile(join(task.templateDir, task.src), 'utf8')\n\n  const dest = compiler.make(task.dest)(data)\n  const template = compiler.make(src)(data)\n\n  observer.next(`Writing file ${dest}`)\n\n  await outputFile(\n    join(config.projectDir, dest),\n    task.parser ? prettier.format(template, task.parser) : template,\n  )\n\n  observer.complete()\n}\n\nexport default compile\n","import {join} from 'path'\nimport {copy as fsCopy} from 'fs-extra'\n\n/**\n * Action: copy\n *\n * @param  {object}   task\n * @param  {Observer} observer\n * @param  {object}   config\n *\n * @return {void}\n */\nconst copy = async ({task, config, observer}) => {\n  const src = join(task.templateDir, task.src)\n  const dest = join(config.projectDir, task.dest)\n\n  observer.next(`Copying file`)\n  await fsCopy(src, dest)\n\n  observer.complete()\n}\n\nexport default copy\n","import {join} from 'path'\nimport fs from 'fs-extra'\n\n/**\n * Make directory\n *\n * @param  {object}   task\n * @param  {Observer} observer\n * @param  {object}   config\n * @param  {object}   data\n * @param  {object}   compiler\n *\n * @return {void}\n */\nconst ensureDir = async ({\n  task,\n  observer,\n  config,\n  data,\n  compiler,\n}) => {\n  const path = join(config.projectDir, compiler.make(task.path)(data))\n\n  observer.next(`Writing directory ${path}`)\n  await fs.ensureDir(path)\n\n  observer.complete()\n}\n\nexport default ensureDir\n","import {Observable, from} from 'rxjs'\nimport {concatMap} from 'rxjs/operators'\n\n/**\n * Scaffold directories\n *\n * @prop   {task array} dirs\n * @return {Observable}\n */\nconst ensureDirs = ({\n  task,\n  observer,\n  actions,\n  config,\n  data,\n  compiler,\n}) => {\n  from(task.dirs)\n    .pipe(\n      concatMap(\n        path =>\n          new Observable(observer => {\n            actions.ensureDir({\n              task: {path},\n              config,\n              data,\n              compiler,\n              observer,\n            })\n          }),\n      ),\n    )\n    .subscribe({\n      next: next => observer.next(next),\n      error: error => observer.error(error),\n      complete: () => observer.complete(),\n    })\n}\n\nexport default ensureDirs\n","/**\n * Action: git clone\n *\n * @prop {object}   task\n * @prop {Observer} observer\n * @prop {object}   util\n */\nconst clone = async ({observer, task, util}) => {\n  observer.next(`Cloning ${task.repo} to ${task.dest}`)\n\n  const clone = util.command(\n    `git clone git@github.com:${task.repo} ${task.dest}`,\n  )\n\n  clone.stdout.on('data', () =>\n    observer.next(\n      observer.next(`Cloning ${task.repo} to ${task.dest}}`),\n    ),\n  )\n\n  clone.then(() => observer.complete())\n}\n\nexport default clone\n","import clone from './clone'\n\n/**\n * Action: Github\n *\n * @prop   {object}   task\n * @prop   {Observer} observer\n * @prop   {object}   util\n */\nconst git = async ({task, observer, ...props}) => {\n  if (task.action == 'clone') {\n    clone({task, observer, ...props})\n  }\n}\n\nexport default git\n","/**\n * Action: Install from package files\n *\n * @prop   {object}   task\n * @prop   {Observer} observer\n * @prop   {object}   util\n *\n * @return {Observable}\n */\nconst install = async ({task, observer, util}) => {\n  const cmdStr = () => {\n    switch (task.repo) {\n      case 'npm':\n        return 'yarn'\n      case 'packagist':\n        return 'composer install'\n      default:\n        observer.error(`Incorrect package repo specified.`)\n    }\n  }\n\n  observer.next(`Installating packages from ${task.repo}`)\n\n  const {command, exitCode, stderr} = await util.command(cmdStr())\n\n  command && observer.next(command)\n\n  exitCode == 0 ? observer.complete() : observer.error(stderr)\n}\n\nexport default install\n","import {outputFile} from 'fs-extra'\n\n/**\n * Action: Manipulate project JSON\n *\n * @prop {object}   task\n * @prop {Observer} observer\n * @prop {Prettier} prettier\n */\nconst json = async function ({task, observer, prettier, config}) {\n  const json = require(`${config.projectDir}/${task.file}`)\n  observer.next(`Writing JSON to ${task.file}`)\n\n  try {\n    const output = task.merge(json)\n    await outputFile(\n      `${config.projectDir}/${task.file}`,\n      prettier.format(output, 'json'),\n    )\n\n    observer.complete()\n  } catch (err) {\n    console.log(`There was a problem writing to ${task.file}`)\n  }\n}\n\nexport default json\n","import {ensureFile} from 'fs-extra'\nimport {join} from 'path'\n\n/**\n * Action: Touch\n *\n * @prop   {object}   task\n * @prop   {object}   config\n * @prop   {object}   compiler\n * @prop   {object}   data\n * @prop   {Observer} observer\n */\nconst touch = async ({task, config, compiler, data, observer}) => {\n  const path = join(config.projectDir, compiler.make(task.path)(data))\n\n  try {\n    await ensureFile(path).then(() => {\n      observer.next()\n    })\n\n    observer.complete()\n  } catch (error) {\n    observer.error()\n  }\n}\n\nexport default touch\n","import addDependencies from './addDependencies'\nimport command from './command'\nimport compile from './compile'\nimport copy from './copy'\nimport ensureDir from './ensureDir'\nimport ensureDirs from './ensureDirs'\nimport git from './git'\nimport install from './install'\nimport json from './json'\nimport touch from './touch'\n\n/**\n * Actions\n *\n * @type {object}\n */\nconst actions = {\n  addDependencies,\n  command,\n  compile,\n  copy,\n  ensureDir,\n  ensureDirs,\n  git,\n  install,\n  json,\n  touch,\n  register: function ({action}) {\n    this[`${action.handle}`] = action.callback\n  },\n}\n\nexport default actions\n","/**\n * Prettier parsers.\n * @type {object}\n */\nconst parsers = {\n  js: 'babel',\n  jsx: 'babel',\n  graphql: 'graphql',\n  css: 'css',\n  json: 'json',\n  md: 'markdown',\n  html: 'html',\n  htm: 'html',\n  ts: 'typescript',\n  tsx: 'typescript',\n  yml: 'yaml',\n  yaml: 'yaml',\n  less: 'less',\n}\n\n/**\n * Infer parser.\n *\n * @type  {async func}\n * @param {string} file\n */\nconst inferParser = async function (file) {\n  const ext = file.split('.')[file.split('.').length - 1]\n\n  return parsers[`${ext}`] ?? null\n}\n\nexport default inferParser\n","module.exports = {\n  arrowParens: 'avoid',\n  bracketSpacing: false,\n  tabWidth: 2,\n  printWidth: 70,\n  singleQuote: true,\n  jsxBracketSameLine: true,\n  useTabs: false,\n  trailingComma: 'all',\n  semi: false,\n  overrides: [\n    {\n      files: ['*.md'],\n      options: {\n        parser: 'markdown',\n      },\n    },\n    {\n      files: ['*.json'],\n      options: {\n        parser: 'json',\n      },\n    },\n  ],\n}\n","import prettier from 'prettier'\nconst config = require('../../../prettier.config.js')\n\n/**\n * Format\n *\n * @type   {func}\n * @param  {object|string} content\n * @param  {parser} string\n * @return {string}\n */\nconst format = (content, parser) => {\n  content =\n    typeof content !== 'string' ? JSON.stringify(content) : content\n\n  return prettier.format(content, {\n    ...config,\n    parser: parser || 'babel',\n  })\n}\n\nexport default format\n","import inferParser from './inferParser'\nimport format from './format'\n\n/**\n * Prettier\n */\nconst prettier = {\n  format,\n  inferParser,\n}\n\nexport default prettier\n","import {Observable, from} from 'rxjs'\nimport {concatMap} from 'rxjs/operators'\nimport makeCompiler from './compiler'\nimport makeConfig from './config'\nimport makeData from './data'\nimport makeUtil from './util'\nimport pipes from './pipes'\nimport actions from './actions'\nimport prettier from './prettier'\n\n/**\n * Bud\n *\n * @prop {string} projectDir\n * @prop {object} config\n * @prop {object} data\n * @prop {object} generator\n * @prop {string} templateDir\n * @prop {bool}   logging\n *\n * @return {Observable}\n */\nconst bud = props => {\n  const {generator} = props\n  const config = makeConfig({...props})\n  const data = makeData({...props})\n  const util = makeUtil({config})\n  const compiler = makeCompiler({generator, data})\n\n  generator.registerActions &&\n    generator.registerActions.forEach(action => {\n      actions.register({action})\n    })\n\n  return new Observable(observer => {\n    const props = {\n      config,\n      data,\n      actions,\n      compiler,\n      prettier,\n      util,\n      generator,\n    }\n\n    from(pipes)\n      .pipe(\n        concatMap(\n          job =>\n            new Observable(async observer => {\n              await job({observer, ...props})\n            }),\n        ),\n      )\n\n      .subscribe({\n        next: next => {\n          observer.next(next)\n        },\n        error: error => {\n          observer.error(error)\n        },\n        complete: () => {\n          observer.complete()\n        },\n      })\n  })\n}\n\nexport default bud\n","import {useEffect, useState} from 'react'\nimport {useApp} from 'ink'\nimport bud from './../bud'\n\n/**\n * Use subscription.\n *\n * Once there is a generator and data available it is passed to the bud\n * engine to be run. Bud will return an rxjs observable to be utilized\n * by components like Tasks to indicate to the user what is going on\n * with the scaffold process.\n */\nconst useSubscription = ({config, data, projectDir, generator}) => {\n  const {exit} = useApp()\n\n  const [subscription, setSubscription] = useState(false)\n  const [status, setStatus] = useState(null)\n  const [error] = useState(null)\n  const [complete, setComplete] = useState(false)\n\n  useEffect(() => {\n    if (generator && data && !subscription) {\n      setSubscription(\n        bud({config, data, generator, projectDir}).subscribe({\n          next: next => setStatus(next),\n          complete: () => setComplete(true),\n        }),\n      )\n    }\n  }, [data])\n\n  useEffect(() => {\n    complete &&\n      (() => {\n        subscription.unsubscribe()\n        exit()\n      })()\n  }, [complete])\n\n  return {status, error, complete}\n}\n\nexport default useSubscription\n","import React from 'react'\nimport {Box, Text} from 'ink'\nimport Spinner from 'ink-spinner'\n\n/**\n * Tasks\n *\n * @prop {object} status\n * @prop {object} sprout\n * @prop {bool}   complete\n */\nconst Tasks = ({status, complete}) => {\n  if (complete) {\n    return <Text green>🏁{'  '}Done</Text>\n  }\n\n  if (!status || complete) {\n    return []\n  }\n\n  return (\n    <Box>\n      {status && (\n        <Text green>\n          <Spinner /> {status}\n        </Text>\n      )}\n    </Box>\n  )\n}\n\nexport default Tasks\n","import React from 'react'\n\nimport useConfig from './../hooks/useConfig'\nimport useData from './../hooks/useData'\nimport usePreset from '../hooks/usePreset'\nimport useSubscription from './../hooks/useSubscription'\n\nimport Tasks from './../components/Tasks'\n\nconst cwd = process.cwd()\n\n/**\n * Middleware: Preset\n *\n * @prop {string} budfile\n * @prop {string} output\n */\nconst PresetMiddleware = ({presetFile, output}) => {\n  const {config} = useConfig(cwd)\n  const preset = usePreset(presetFile)\n  const {data} = useData(preset)\n  const {status, complete} = useSubscription({\n    config,\n    data,\n    generator: preset,\n    projectDir: output,\n  })\n\n  return <Tasks status={status} complete={complete} />\n}\n\nexport default PresetMiddleware\n","import {join} from 'path'\nimport React, {useEffect, useState} from 'react'\nimport PropTypes from 'prop-types'\nimport {isEqual} from 'lodash'\nimport SelectInput from '../../src/components/input/select-input'\n\nimport usePresetIndex from '../../src/hooks/usePresetIndex'\n\nimport App from './../../src/components/App'\nimport PresetMiddleware from './../../src/middleware/PresetMiddleware'\n\nconst cwd = process.cwd()\n\n/** Command: bud preset */\n/// Run a preset.\nconst Preset = ({inputArgs}) => {\n  /**\n   * If a particular preset is specified, put it in state.\n   */\n  const name = inputArgs[1] || null\n\n  /**\n   * If an output directory was passed as an argument\n   * then resolve the full path and put it in state.\n   *\n   * No argument will default to the cwd.\n   */\n  const output = inputArgs[2] ? join(cwd, inputArgs[2]) : cwd\n\n  /**\n   * Load all discoverable presets.\n   *\n   * @note The preset index hook\n   *       also returns a boolean `complete` value which means that the\n   *       search has concluded and we have all the values.\n   */\n  const {plugin, core, complete} = usePresetIndex()\n  const [presets, setPresets] = useState(null)\n  useEffect(() => {\n    complete &&\n      setPresets(\n        [...core, ...plugin].map(preset => ({\n          value: preset.path,\n          label: preset.name,\n        })),\n      )\n  }, [name, complete])\n\n  /**\n   * If the user passed a name as an argument, filter the presets\n   * with that value.\n   */\n  const [selection, setSelection] = useState(null)\n  useEffect(() => {\n    if (name && presets && complete) {\n      /**\n       * @todo it is possible that there was more than one matching presets for\n       *       the specified name. We should let the user know that we are running\n       *       the first result we find, but that a conflict existed.\n       */\n      const presetCandidates = presets.filter(preset =>\n        isEqual(preset.label, name),\n      )\n      const selection = presetCandidates[0]\n\n      setSelection(selection)\n    }\n  }, [complete, presets, name])\n\n  /**\n   * Presets are considered loading when there are\n   * no resolved presets and no selection\n   */\n  const isLoading = !presets && !selection\n\n  /**\n   * Display search when no particular preset was specified,\n   * we have presets to display and no selection has yet\n   * been made.\n   */\n  const displayQuickSearch = !name && presets && !selection\n\n  /**\n   * Display the search field, and once a selection has been made\n   * run the generator middleware on the selected generator.\n   */\n  return (\n    <App isLoading={isLoading}>\n      {displayQuickSearch && (\n        <SelectInput\n          label=\"Select a preset\"\n          items={presets}\n          onSelect={selection => setSelection(selection)}\n        />\n      )}\n\n      {selection && (\n        <PresetMiddleware\n          output={output}\n          presetFile={selection.value}\n        />\n      )}\n    </App>\n  )\n}\n\nPreset.propTypes = {\n  inputArgs: PropTypes.array,\n}\n\nexport default Preset\n"]}